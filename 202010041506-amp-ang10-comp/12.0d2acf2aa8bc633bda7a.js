(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"/vcS":function(t,e,a){"use strict";a.d(e,"a",(function(){return y})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return p})),a.d(e,"e",(function(){return f})),a.d(e,"f",(function(){return d})),a.d(e,"g",(function(){return b})),a.d(e,"h",(function(){return j})),a.d(e,"i",(function(){return w})),a.d(e,"j",(function(){return A})),a.d(e,"k",(function(){return s})),a.d(e,"l",(function(){return l})),a.d(e,"m",(function(){return g})),a.d(e,"n",(function(){return m})),a.d(e,"o",(function(){return v})),a.d(e,"p",(function(){return O})),a.d(e,"q",(function(){return c})),a.d(e,"r",(function(){return S})),a.d(e,"s",(function(){return h})),a.d(e,"t",(function(){return i})),a.d(e,"u",(function(){return u})),a.d(e,"v",(function(){return n}));var n="username",r="email",i="code",s="phone",u="password",o="country-dial-code-select",c="+1",h="amplify-auth-source",d="amplify-redirected-from-hosted-ui",l="amplify-authenticator-authState",f="Phone number can not be empty",p="No Auth module found, please ensure @aws-amplify/auth is imported",m="No Storage module found, please ensure @aws-amplify/storage is imported",g="No Interactions module found, please ensure @aws-amplify/interactions is imported",b="SETUP_TOTP",v="User has not set up software token mfa",O="User has not verified software token mfa",S="SUCCESS",y="auth",w="UI Auth",j="ToastAuthError",A="AuthStateChange"},HaBs:function(t,e,a){"use strict";a.r(e),a.d(e,"amplify_authenticator",(function(){return v}));var n=a("o0o1"),r=a.n(n),i=a("HaE+"),s=a("1OyB"),u=a("vuIU"),o=a("bRKV"),c=a("Nt7R"),h=a("Qycn"),d=a("s1tr"),l=a("XG+1"),f=a("+hOe"),p=(a("c82j"),a("/vcS")),m=a("MFbZ"),g=a("Zm4j"),b=new c.a("Authenticator"),v=function(){function t(e){var a=this;Object(s.a)(this,t),Object(o.k)(this,e),this.initialAuthState=d.a.SignIn,this.handleAuthStateChange=function(){},this.authState=d.a.Loading,this.toastMessage="",this.handleExternalAuthEvent=function(t){var e=t.payload;switch(e.event){case"cognitoHostedUI":case"signIn":Object(g.a)(e.data,m.d);break;case"cognitoHostedUI_failure":case"parsingUrl_failure":case"signOut":case"customGreetingSignOut":return Object(m.d)(a.initialAuthState)}},this.handleToastEvent=function(t){var e=t.payload;switch(e.event){case p.h:e.message&&(a.toastMessage=e.message)}}}var e,a,n;return Object(u.a)(t,[{key:"componentWillLoad",value:(n=Object(i.a)(r.a.mark((function t(){var e,a=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(m.h)((function(t,e){a.onAuthStateChange(t,e),a.toastMessage=""})),h.a.listen(p.i,this.handleToastEvent),h.a.listen(p.a,this.handleExternalAuthEvent),Object(l.j)("amplify-authenticator"),e=localStorage.getItem(p.f),localStorage.removeItem(p.f),"true"===e){t.next=9;break}return t.next=9,this.checkUser();case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"checkUser",value:(a=Object(i.a)(r.a.mark((function t(){var e,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f.a&&"function"==typeof f.a.currentAuthenticatedUser){t.next=2;break}throw new Error(p.d);case 2:return t.prev=2,t.next=5,f.a.currentAuthenticatedUser();case 5:e=t.sent,Object(m.d)(d.a.SignedIn,e),t.next=23;break;case 9:t.prev=9,t.t0=t.catch(2),a=null;try{a=localStorage.getItem(p.l)}catch(n){b.debug("Failed to get the auth state from local storage",n)}if(t.prev=13,a!==d.a.SignedIn){t.next=17;break}return t.next=17,f.a.signOut();case 17:Object(m.d)(this.initialAuthState),t.next=23;break;case 20:t.prev=20,t.t1=t.catch(13),b.debug("Failed to sign out",t.t1);case 23:case"end":return t.stop()}}),t,this,[[2,9],[13,20]])}))),function(){return a.apply(this,arguments)})},{key:"onAuthStateChange",value:(e=Object(i.a)(r.a.mark((function t(e,a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",b.error("nextAuthState cannot be undefined"));case 2:b.info("Inside onAuthStateChange Method current authState:",this.authState),this.authState=e===d.a.SignedOut?this.initialAuthState:e,this.authData=a,this.authData&&b.log("Auth Data was set:",this.authData),this.authState===e&&(this.handleAuthStateChange(this.authState,this.authData),b.info("authState has been updated to ".concat(this.authState)));case 7:case"end":return t.stop()}}),t,this)}))),function(t,a){return e.apply(this,arguments)})},{key:"renderAuthComponent",value:function(t){switch(t){case d.a.SignIn:return Object(o.i)("slot",{name:"sign-in"},Object(o.i)("amplify-sign-in",{federated:this.federated,usernameAlias:this.usernameAlias}));case d.a.ConfirmSignIn:return Object(o.i)("slot",{name:"confirm-sign-in"},Object(o.i)("amplify-confirm-sign-in",{user:this.authData}));case d.a.SignUp:return Object(o.i)("slot",{name:"sign-up"},Object(o.i)("amplify-sign-up",{usernameAlias:this.usernameAlias}));case d.a.ConfirmSignUp:return Object(o.i)("slot",{name:"confirm-sign-up"},Object(o.i)("amplify-confirm-sign-up",{user:this.authData,usernameAlias:this.usernameAlias}));case d.a.ForgotPassword:return Object(o.i)("slot",{name:"forgot-password"},Object(o.i)("amplify-forgot-password",{usernameAlias:this.usernameAlias}));case d.a.ResetPassword:return Object(o.i)("slot",{name:"require-new-password"},Object(o.i)("amplify-require-new-password",{user:this.authData}));case d.a.VerifyContact:return Object(o.i)("slot",{name:"verify-contact"},Object(o.i)("amplify-verify-contact",{user:this.authData}));case d.a.TOTPSetup:return Object(o.i)("slot",{name:"totp-setup"},Object(o.i)("amplify-totp-setup",{user:this.authData}));case d.a.Loading:return Object(o.i)("slot",{name:"loading"},Object(o.i)("div",null,"Loading..."));case d.a.SignedIn:return[Object(o.i)("slot",{name:"greetings"}),Object(o.i)("slot",null)];default:throw new Error("Unhandled auth state: ".concat(t))}}},{key:"componentWillUnload",value:function(){return h.a.remove(p.a,this.handleExternalAuthEvent),h.a.remove(p.i,this.handleToastEvent),m.h}},{key:"render",value:function(){var t=this;return Object(o.i)(o.b,null,this.toastMessage?Object(o.i)("amplify-toast",{message:this.toastMessage,handleClose:function(){t.toastMessage=""},"data-test":"authenticator-error"}):null,this.renderAuthComponent(this.authState))}}]),t}();v.style=":host{--background-color:var(--amplify-background-color);--width:28.75rem;--min-width:20rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;--box-shadow:1px 1px 4px 0 rgba(0, 0, 0, 0.15);--border-radius:6px;--padding:35px 40px;--margin-bottom:20px}"}}]);